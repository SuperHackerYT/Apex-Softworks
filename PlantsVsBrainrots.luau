loadstring(game:HttpGet('data:text/plain;base64,LS0gPT09PT09PT09PT09PT09PT09PT09PT09PQpsb2NhbCB2YXJfNDlxbDkyID0gIjEuMCIKLS0gPT09PT09PT09PT09PT09PT09PT09PT09PQoKcmVwZWF0IHRhc2sud2FpdCgpIHVudGlsIGdhbWU6SXNMb2FkZWQoKQoKLS0gRlBTIFVubG9jawppZiBzZXRmcHNjYXAgdGhlbgogICAgc2V0ZnBzY2FwKDEwMDAwMDApCiAgICBnYW1lOkdldFNlcnZpY2UoIlN0YXJ0ZXJHdWkiKTpTZXRDb3JlKCJTZW5kTm90aWZpY2F0aW9uIiwgewogICAgICAgIFRpdGxlID0gIkFwZXgiLAogICAgICAgIFRleHQgPSAiRlBTIFVubG9ja2VkISIsCiAgICAgICAgRHVyYXRpb24gPSAyLAogICAgICAgIEJ1dHRvbjEgPSAiT2theSIKICAgIH0pCiAgICB3YXJuKCJGUFMgVW5sb2NrZWQhIikKZWxzZQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJTdGFydGVyR3VpIik6U2V0Q29yZSgiU2VuZE5vdGlmaWNhdGlvbiIsIHsKICAgICAgICBUaXRsZSA9ICJCb29zdHJhcCIsCiAgICAgICAgVGV4dCA9ICJZb3VyIGV4cGxvaXQgZG9lcyBub3Qgc3VwcG9ydCBzZXRmcHNjYXAuIiwKICAgICAgICBEdXJhdGlvbiA9IDIsCiAgICAgICAgQnV0dG9uMSA9ICJPa2F5IgogICAgfSkKICAgIHdhcm4oIllvdXIgZXhwbG9pdCBkb2VzIG5vdCBzdXBwb3J0IHNldGZwc2NhcC4iKQplbmQKCmxvY2FsIHZhcl92NzEzN3cgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9naXRodWIuY29tL0Zvb3RhZ2VzdXMvV2luZFVJL3JlbGVhc2VzL2xhdGVzdC9kb3dubG9hZC9tYWluLmx1YSIpKSgpCgotLSBBZGQgdGhlbWUKV2luZFVJOkFkZFRoZW1lKHsKICAgIE5hbWUgPSAiQ3VzdG9tIiwKICAgIAogICAgQWNjZW50ID0gQ29sb3IzLmZyb21IZXgoIiMzNDk4ZGIiKSwKICAgIEJhY2tncm91bmQgPSBDb2xvcjMuZnJvbUhleCgiIzFhMWEyZSIpLAogICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuMDUsCiAgICBPdXRsaW5lID0gQ29sb3IzLmZyb21IZXgoIiMyOTgwYjkiKSwKICAgIFRleHQgPSBDb2xvcjMuZnJvbUhleCgiI2VjZjBmMSIpLAogICAgUGxhY2Vob2xkZXIgPSBDb2xvcjMuZnJvbUhleCgiIzdmOGM4ZCIpLAogICAgQnV0dG9uID0gQ29sb3IzLmZyb21IZXgoIiMwMGMzYzMiKSwKICAgIEljb24gPSBDb2xvcjMuZnJvbUhleCgiIzM0OThkYiIpLAogICAgCiAgICBIb3ZlciA9IENvbG9yMy5mcm9tSGV4KCIjMzQ5OGRiIiksCiAgICAKICAgIFdpbmRvd0JhY2tncm91bmQgPSBDb2xvcjMuZnJvbUhleCgiIzBkMTExNyIpLAogICAgV2luZG93U2hhZG93ID0gQ29sb3IzLmZyb21IZXgoIiMwMDAwMDAiKSwKICAgIAogICAgRGlhbG9nQmFja2dyb3VuZCA9IENvbG9yMy5mcm9tSGV4KCIjMWExYTJlIiksCiAgICBEaWFsb2dCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMCwKICAgIERpYWxvZ1RpdGxlID0gQ29sb3IzLmZyb21IZXgoIiNlY2YwZjEiKSwKICAgIERpYWxvZ0NvbnRlbnQgPSBDb2xvcjMuZnJvbUhleCgiI2VjZjBmMSIpLAogICAgRGlhbG9nSWNvbiA9IENvbG9yMy5mcm9tSGV4KCIjMzQ5OGRiIiksCiAgICAKICAgIFdpbmRvd1RvcGJhckJ1dHRvbkljb24gPSBDb2xvcjMuZnJvbUhleCgiIzM0OThkYiIpLAogICAgV2luZG93VG9wYmFyVGl0bGUgPSBDb2xvcjMuZnJvbUhleCgiI2VjZjBmMSIpLAogICAgV2luZG93VG9wYmFyQXV0aG9yID0gQ29sb3IzLmZyb21IZXgoIiNlY2YwZjEiKSwKICAgIFdpbmRvd1RvcGJhckljb24gPSBDb2xvcjMuZnJvbUhleCgiI2VjZjBmMSIpLAogICAgCiAgICBUYWJCYWNrZ3JvdW5kID0gQ29sb3IzLmZyb21IZXgoIiNlY2YwZjEiKSwKICAgIFRhYlRpdGxlID0gQ29sb3IzLmZyb21IZXgoIiNlY2YwZjEiKSwKICAgIFRhYkljb24gPSBDb2xvcjMuZnJvbUhleCgiIzM0OThkYiIpLAogICAgCiAgICBFbGVtZW50QmFja2dyb3VuZCA9IENvbG9yMy5mcm9tSGV4KCIjZWNmMGYxIiksCiAgICBFbGVtZW50VGl0bGUgPSBDb2xvcjMuZnJvbUhleCgiI2VjZjBmMSIpLAogICAgRWxlbWVudERlc2MgPSBDb2xvcjMuZnJvbUhleCgiI2VjZjBmMSIpLAogICAgRWxlbWVudEljb24gPSBDb2xvcjMuZnJvbUhleCgiIzM0OThkYiIpLAogICAgCiAgICBQb3B1cEJhY2tncm91bmQgPSBDb2xvcjMuZnJvbUhleCgiIzFhMWEyZSIpLAogICAgUG9wdXBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMCwKICAgIFBvcHVwVGl0bGUgPSBDb2xvcjMuZnJvbUhleCgiI2VjZjBmMSIpLAogICAgUG9wdXBDb250ZW50ID0gQ29sb3IzLmZyb21IZXgoIiNlY2YwZjEiKSwKICAgIFBvcHVwSWNvbiA9IENvbG9yMy5mcm9tSGV4KCIjMzQ5OGRiIiksCn0pCgotLSA9PT09PT09PT09PT09PT09PT09PT09IFNFUlZJQ0VTID09PT09PT09PT09PT09PT09PT09PT0KbG9jYWwgdmFyX3BrNTQ3ciA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKQpsb2NhbCB2YXJfOGk2cXQ3ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgdmFyX3BudG8xYyA9IGdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpCmxvY2FsIHZhcl9yb2huOWogPSBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIikKbG9jYWwgdmFyX3U2Y3hyciA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikKbG9jYWwgdmFyXzRpajFhNyA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpCmxvY2FsIHZhcl96cHNwNnkgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCmxvY2FsIHZhcl8zbTh0amggPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIgb3IgTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpCmxvY2FsIHZhcl82dHp6Y3ggPSBDaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKbG9jYWwgdmFyX2U5cGNhdSA9IExvY2FsUGxheWVyOldhaXRGb3JDaGlsZCgiQmFja3BhY2siKQoKLS0gPT09PT09PT09PT09PT09PT09PT09PSBTRVRUSU5HUyA9PT09PT09PT09PT09PT09PT09PT09CmxvY2FsIHZhcl9lNXp3eDEgPSBmYWxzZQpsb2NhbCB2YXJfbDZyY2cxID0gZmFsc2UKbG9jYWwgdmFyXzh4anR5dyA9IGZhbHNlCmxvY2FsIHZhcl9veXFwNmYgPSBmYWxzZQpsb2NhbCB2YXJfN3Z2OHZtID0gZmFsc2UKCmxvY2FsIHZhcl8weDc2aTYgPSBmYWxzZQpsb2NhbCB2YXJfNHBxMmRoID0gZmFsc2UKbG9jYWwgdmFyX24xNDZ5YSA9IDIwCmxvY2FsIHZhcl9yczByY3YgPSAwLjI1Cgpsb2NhbCB2YXJfcDQ1a3M4ID0gZmFsc2UKCmxvY2FsIHZhcl9zaGxkY3ggPSBmYWxzZQpsb2NhbCB2YXJfZnF1bG9uID0gZmFsc2UKbG9jYWwgdmFyX3JrMWY4cyA9IGZhbHNlCgpsb2NhbCB2YXJfZnVpZ25sID0gewogICAgIkJhc2ljIEJhdCIsCiAgICAiTGVhdGhlciBHcmlwIEJhdCIsCiAgICAiSXJvbiBQbGF0ZSBCYXQiLAogICAgIklyb24gQ29yZSBCYXQiLAogICAgIkFsdW1pbnVtIEJhdCIsCiAgICAiSGFtbWVyIEJhdCIsCiAgICAiU2tlbGV0b25pemVkIEJhdCIKfQoKbG9jYWwgdmFyX3Q1ZjhzMCA9IG9zLnRpbWUoKQoKLS0gPT09PT09PT09PT09PT09PT09PT09IFNIT1AgSVRFTVMgPT09PT09PT09PT09PT09PT09PT09CmxvY2FsIHZhcl9vZXZic3ggPSB7CiAgICBzZWVkTGlzdCA9IHsKICAgICAgICAiQ2FjdHVzIFNlZWQiLAogICAgICAgICJTdHJhd2JlcnJ5IFNlZWQiLAogICAgICAgICJQdW1wa2luIFNlZWQiLAogICAgICAgICJTdW5mbG93ZXIgU2VlZCIsCiAgICAgICAgIkRyYWdvbiBTZWVkIiwKICAgICAgICAiRWdncGxhbnQgU2VlZCIsCiAgICAgICAgIldhdGVybWVsb24gU2VlZCIsCiAgICAgICAgIkdyYXBlIFNlZWQiLAogICAgICAgICJDb2NvdGFuayBTZWVkIiwKICAgICAgICAiQ2Fybml2b3JvdXMgUGxhbnQgU2VlZCIsCiAgICAgICAgIk1yIENhcnJvdCBTZWVkIiwKICAgICAgICAiVG9tYXRyaW8gU2VlZCIsCiAgICAgICAgIlNocm9vbWJpbm8gU2VlZCIsCiAgICAgICAgIk1hbmdvIFNlZWQiLAogICAgICAgICJLaW5nIExpbW9uZSBTZWVkIgogICAgfSwKCiAgICBnZWFyTGlzdCA9IHsKICAgICAgICAiV2F0ZXIgQnVja2V0IiwKICAgICAgICAiRnJvc3QgR3JlbmFkZSIsCiAgICAgICAgIkJhbmFuYSBHdW4iLAogICAgICAgICJGcm9zdCBCbG93ZXIiLAogICAgICAgICJDYXJyb3QgTGF1bmNoZXIiCiAgICB9LAogICAgUGxhdGZvcm1MaXN0ID0gewogICAgICAgICIxIiwiMiIsIjMiLCI0IiwiNSIsCiAgICAgICAgIjYiLCI3IiwiOCIsIjkiLCIxMCIsCiAgICAgICAgIjExIiwiMTIiLCIxMyIsIjE0IiwKICAgICAgICAiMTUiLCIxNiIsIjE3IgogICAgfQp9CgotLSA9PT09PT09PT09PT09PT09PT09PT0gVkFSSUFCTEVTID09PT09PT09PT09PT09PT09PT09PQpsb2NhbCB2YXJfcGdkMHExID0ge30KbG9jYWwgdmFyXzVmcXVkbyA9IHt9CmxvY2FsIHZhcl9pZWIwdTUgPSB7fQoKbG9jYWwgdmFyX2t5czh0bCA9IGZhbHNlCmxvY2FsIHZhcl84ejFyOGwgPSBmYWxzZQpsb2NhbCB2YXJfNWVyMXBhID0gZmFsc2UKCmxvY2FsIHZhcl92M2pjamkgPSBmYWxzZQpsb2NhbCB2YXJfeXZxNzFrID0gZmFsc2UKbG9jYWwgdmFyXzF4NXR1MSA9IGZhbHNlCgotLSA9PT09PT09PT09PT09PT09PT09PT09IEhFTFBFUiBGVU5DVElPTlMgPT09PT09PT09PT09PT09PT09PT09PQpsb2NhbCB2YXJfdTcxNTM4IEdldE15UGxvdCgpCiAgICBmb3IgXywgcGxvdCBpbiBpcGFpcnMoV29ya3NwYWNlLlBsb3RzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgbG9jYWwgdmFyXzkzZ2l4diA9IHBsb3Q6RmluZEZpcnN0Q2hpbGQoIlBsYXllclNpZ24iKQogICAgICAgIGlmIHBsYXllclNpZ24gdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfZWl1NzNwID0gcGxheWVyU2lnbjpGaW5kRmlyc3RDaGlsZCgiQmlsbGJvYXJkR3VpIikKICAgICAgICAgICAgbG9jYWwgdmFyX2lrcmthNyA9IGJnIGFuZCBiZzpGaW5kRmlyc3RDaGlsZCgiVGV4dExhYmVsIikKICAgICAgICAgICAgaWYgdGV4dExhYmVsIGFuZCAodGV4dExhYmVsLlRleHQgPT0gTG9jYWxQbGF5ZXIuTmFtZSBvciB0ZXh0TGFiZWwuVGV4dCA9PSBMb2NhbFBsYXllci5EaXNwbGF5TmFtZSkgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIHBsb3QKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBuaWwKZW5kCgpsb2NhbCB2YXJfdXg5bTEyIEdldE15UGxvdE5hbWUoKQogICAgbG9jYWwgdmFyXzcyZDU3dyA9IEdldE15UGxvdCgpCiAgICByZXR1cm4gcGxvdCBhbmQgcGxvdC5OYW1lIG9yICJObyBQbG90IgplbmQKCmxvY2FsIHZhcl94cmhlNGcgR2V0TW9uZXkoKQogICAgbG9jYWwgdmFyX3AwbXNjaSA9IExvY2FsUGxheWVyOkZpbmRGaXJzdENoaWxkKCJsZWFkZXJzdGF0cyIpCiAgICByZXR1cm4gbGVhZGVyc3RhdHMgYW5kIGxlYWRlcnN0YXRzOkZpbmRGaXJzdENoaWxkKCJNb25leSIpIGFuZCBsZWFkZXJzdGF0cy5Nb25leS5WYWx1ZSBvciAwCmVuZAoKbG9jYWwgdmFyX2R3NTdjcCBHZXRSZWJpcnRoKCkKICAgIGxvY2FsIHZhcl90M2lmc3ogPSBMb2NhbFBsYXllcjpGaW5kRmlyc3RDaGlsZCgiUGxheWVyR3VpIikgYW5kIExvY2FsUGxheWVyLlBsYXllckd1aTpGaW5kRmlyc3RDaGlsZCgiTWFpbiIpCiAgICBpZiBndWkgYW5kIGd1aTpGaW5kRmlyc3RDaGlsZCgiUmViaXJ0aCIpIHRoZW4KICAgICAgICBsb2NhbCB2YXJfeHJyemtwID0gZ3VpLlJlYmlydGguRnJhbWUuVGl0bGUuVGV4dCBvciAiUmViaXJ0aCAwIgogICAgICAgIGxvY2FsIHZhcl8xNTNqZTUgPSB0b251bWJlcih0ZXh0Om1hdGNoKCIlZCsiKSkgb3IgMAogICAgICAgIHJldHVybiBtYXRoLm1heCgwLCBuIC0gMSkKICAgIGVuZAogICAgcmV0dXJuIDAKZW5kCgpsb2NhbCB2YXJfM3l6NW92IEZvcm1hdFRpbWUoc2VjKQogICAgbG9jYWwgdmFyX3RhZWRxOCA9IG1hdGguZmxvb3Ioc2VjIC8gMzYwMCkKICAgIGxvY2FsIHZhcl81emxjM28gPSBtYXRoLmZsb29yKChzZWMgJSAzNjAwKSAvIDYwKQogICAgbG9jYWwgdmFyX3B4bWxtcSA9IHNlYyAlIDYwCiAgICByZXR1cm4gc3RyaW5nLmZvcm1hdCgiJTAyZDolMDJkOiUwMmQiLCBoLCBtLCBzKQplbmQKCi0tIHNhZmUgcmVtb3RlIGdldHRlcnMKbG9jYWwgdmFyXzlpNzJxbiBHZXRCcmlkZ2VOZXQyKCkKICAgIHJldHVybiBSZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiQnJpZGdlTmV0MiIpCmVuZAoKbG9jYWwgdmFyX250bzg5OCBHZXRSZW1vdGVzRm9sZGVyKCkKICAgIHJldHVybiBSZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiUmVtb3RlcyIpCmVuZAoKLS0gPT09PT09PT09PT09PT09PT09PT09PSBXSU5ET1cgPT09PT09PT09PT09PT09PT09PT09PQpsb2NhbCB2YXJfYmM2MzZsID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgdmFyX24ydGw5ZiA9IGdhbWU6R2V0U2VydmljZSgiSHR0cFNlcnZpY2UiKQoKLS0gR3JhZGllbnQgZnVuY3Rpb24gZnJvbSBBcGV4IFVJCmxvY2FsIHZhcl8zcHJ5MXYgZ3JhZGllbnQodGV4dCwgc3RhcnRDb2xvciwgZW5kQ29sb3IpCiAgICBsb2NhbCB2YXJfeW9xc2NoID0gIiIKICAgIGxvY2FsIHZhcl8yZjN3NzEgPSAjdGV4dAogICAgZm9yIGkgPSAxLCBsZW5ndGggZG8KICAgICAgICBsb2NhbCB2YXJfODFjZDhnID0gKGkgLSAxKSAvIG1hdGgubWF4KGxlbmd0aCAtIDEsIDEpCiAgICAgICAgbG9jYWwgdmFyXzA0d3hobyA9IG1hdGguZmxvb3IoKHN0YXJ0Q29sb3IuUiArICgoZW5kQ29sb3IuUiAtIHN0YXJ0Q29sb3IuUikgKiB0KSkgKiAyNTUpCiAgICAgICAgbG9jYWwgdmFyXzZld21kYiA9IG1hdGguZmxvb3IoKHN0YXJ0Q29sb3IuRyArICgoZW5kQ29sb3IuRyAtIHN0YXJ0Q29sb3IuRykgKiB0KSkgKiAyNTUpCiAgICAgICAgbG9jYWwgdmFyX2x1aTFxYSA9IG1hdGguZmxvb3IoKHN0YXJ0Q29sb3IuQiArICgoZW5kQ29sb3IuQiAtIHN0YXJ0Q29sb3IuQikgKiB0KSkgKiAyNTUpCiAgICAgICAgbG9jYWwgdmFyX3Bwanp1aCA9IHRleHQ6c3ViKGksIGkpCiAgICAgICAgcmVzdWx0ID0gcmVzdWx0IC4uICc8Zm9udCBjb2xvcj0icmdiKCcgLi4gciAuLiAiLCIgLi4gZyAuLiAiLCIgLi4gYiAuLiAnKSI+JyAuLiBjaGFyIC4uICI8L2ZvbnQ+IgogICAgZW5kCiAgICByZXR1cm4gcmVzdWx0CmVuZAoKLS0gQWFhYQpsb2NhbCB2YXJfNG55dmZyID0gIiAiCgpsb2NhbCB2YXJfdzB4MGVpID0gV2luZFVJOkNyZWF0ZVdpbmRvdyh7CiAgICBUaXRsZSA9ICJBcGV4IEh1YiB8IFBsYW50cyBWcyBCcmFpbnJvdHMiLAogICAgSWNvblRoZW1lZCA9IHRydWUsCiAgICBJY29uID0gInphcCIsCiAgICBBdXRob3IgPSBncmFkaWVudCgiRGV2ZWxvcGVyIC0gRWx2aXMiIC4uIHVzZXJ2ZXJzaW9uLCBDb2xvcjMuZnJvbUhleCgiI2Q1ZWZmOSIpLCBDb2xvcjMuZnJvbUhleCgiIzg3Y2VmYSIpKSwKICAgIEZvbGRlciA9ICJBcGV4UFZCIiwKICAgIFNpemUgPSBVRGltMi5mcm9tT2Zmc2V0KDUwMCwgMzUwKSwKICAgIFRoZW1lID0gIkN1c3RvbSIsCiAgICBOZXdFbGVtZW50cyA9IHRydWUsCiAgICBUcmFuc3BhcmVudCA9IHRydWUsCiAgICBCYWNrZ3JvdW5kSW1hZ2VUcmFuc3BhcmVuY3kgPSAwLjgsCiAgICBIYXNPdXRsaW5lID0gZmFsc2UsCiAgICBIaWRlU2VhcmNoQmFyID0gZmFsc2UsCiAgICBTY3JvbGxCYXJFbmFibGVkID0gdHJ1ZSwKICAgIFVzZXIgPSB7IEVuYWJsZWQgPSB0cnVlLCBBbm9ueW1vdXMgPSBmYWxzZSB9LAp9KQoKV2luZG93OlRhZyh7CiAgICBUaXRsZSA9IHZlcnNpb24sCiAgICBDb2xvciA9IENvbG9yMy5mcm9tSGV4KCIjMzBmZjZhIiksCiAgICBSYWRpdXMgPSAxMiwKfSkKCldpbmRvdzpTZXRUb2dnbGVLZXkoRW51bS5LZXlDb2RlLlYpCgpXaW5kb3c6RWRpdE9wZW5CdXR0b24oewogICAgVGl0bGUgPSAiQXBleCAtIE9wZW4iLAogICAgSWNvbiA9ICJ6YXAiLAogICAgQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMTYpLAogICAgU3Ryb2tlVGhpY2tuZXNzID0gMiwKICAgIENvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXcoQ29sb3IzLmZyb21SR0IoOTUsIDIyNSwgMjUwKSwgQ29sb3IzLmZyb21SR0IoMCwgMCwgMjU1KSksCiAgICBEcmFnZ2FibGUgPSB0cnVlLAp9KQoKLS0gQ3JlYXRlIHRhYnMKbG9jYWwgdmFyX3A4eHRocSA9IFdpbmRvdzpUYWIoeyBUaXRsZSA9ICJIb21lIiwgSWNvbiA9ICJob3VzZSIsIERlc2MgPSAiTWFpbiBkYXNoYm9hcmQgYW5kIGluZm9ybWF0aW9uIiB9KQpsb2NhbCB2YXJfNmNkdDk3ID0gV2luZG93OlRhYih7IFRpdGxlID0gIkluZm9ybWF0aW9uIiwgSWNvbiA9ICJiYWRnZS1pbmZvIiwgRGVzYyA9ICJTY3JpcHQgaW5mb3JtYXRpb24gYW5kIGNyZWRpdHMiIH0pCmxvY2FsIHZhcl9zNnR3cW4gPSBXaW5kb3c6VGFiKHsgVGl0bGUgPSAiTWFpbiIsIEljb24gPSAicm9ja2V0IiwgRGVzYyA9ICJNYWluIGZhcm1pbmcgZmVhdHVyZXMiIH0pCmxvY2FsIHZhcl8xbGVsZXEgPSBXaW5kb3c6VGFiKHsgVGl0bGUgPSAiU2hvcCIsIEljb24gPSAic2hvcHBpbmctY2FydCIsIERlc2MgPSAiQXV0by1idXkgZmVhdHVyZXMiIH0pCmxvY2FsIHZhcl9nb3l6dWsgPSBXaW5kb3c6VGFiKHsgVGl0bGUgPSAiQXV0byIsIEljb24gPSAiY3Jvd24iLCBEZXNjID0gIkF1dG8gY29sbGVjdGlvbiBmZWF0dXJlcyIgfSkKbG9jYWwgdmFyX3R1bjA0biA9IFdpbmRvdzpUYWIoeyBUaXRsZSA9ICJTZWxsIiwgSWNvbiA9ICJkb2xsYXItc2lnbiIsIERlc2MgPSAiQXV0byBzZWxsaW5nIGZlYXR1cmVzIiB9KQpsb2NhbCB2YXJfMzFlaHVvID0gV2luZG93OlRhYih7IFRpdGxlID0gIk1pc2MiLCBJY29uID0gInNldHRpbmdzIiwgRGVzYyA9ICJNaXNjZWxsYW5lb3VzIGZlYXR1cmVzIiB9KQoKV2luZG93OlNlbGVjdFRhYigxKQoKLS0gPT09PT09PT09PT09PT09PT09PT09PSBIT01FIFRBQiAoRnJvbSBBcGV4IFVJKSA9PT09PT09PT09PT09PT09PT09PT09CkhvbWVUYWI6U2VjdGlvbih7CiAgICBUaXRsZSA9ICJXZWxjb21lIHRvIEFwZXgiLAogICAgSWNvbiA9ICJpbmZvIiwKfSkKCmRvCiAgICBsb2NhbCB2YXJfcmZ0Z3R1ID0gSG9tZVRhYjpTZWN0aW9uKHsKICAgICAgICBUaXRsZSA9ICJBcGV4IFNvZnR3b3JrcyIsCiAgICB9KQogICAgCiAgICBXZWxjb21lU2VjdGlvbjpTZWN0aW9uKHsKICAgICAgICBUaXRsZSA9IFtbQXBleCBQbGFudHMgVnMgQnJhaW5yb3RzIGlzIGEgcHJlbWl1bSBzY3JpcHQgZGVzaWduZWQgdG8gZW5oYW5jZSB5b3VyIGdhbWluZyBleHBlcmllbmNlIHdpdGggcG93ZXJmdWwgYXV0b21hdGlvbiBmZWF0dXJlcy4KICAgICAgICAKLSBBdXRvIEZhcm0gQnJhaW5yb3RzCi0gQXV0byBDb2xsZWN0IE1vbmV5Ci0gQXV0byBCdXkgSXRlbXMKLSBBdXRvIFNlbGwgSXRlbXMKLSBQcmVtaXVtIFVJIFRoZW1lCi0gVXNlci1mcmllbmRseSBpbnRlcmZhY2VdXSwKICAgICAgICBUZXh0U2l6ZSA9IDE2LAogICAgICAgIFRleHRUcmFuc3BhcmVuY3kgPSAuMjUsCiAgICAgICAgRm9udFdlaWdodCA9IEVudW0uRm9udFdlaWdodC5NZWRpdW0sCiAgICB9KQogICAgCiAgICBIb21lVGFiOlNwYWNlKHsgQ29sdW1ucyA9IDQgfSkKICAgIAogICAgbG9jYWwgdmFyX2g1Nmo3aSA9IEhvbWVUYWI6U2VjdGlvbih7CiAgICAgICAgVGl0bGUgPSAiR2FtZSBJbmZvIiwKICAgICAgICBJY29uID0gImdhbWVwYWQtMiIKICAgIH0pCiAgICAKICAgIFN0YXRzU2VjdGlvbjpCdXR0b24oewogICAgICAgIFRpdGxlID0gIkNvcHkgR2FtZSBJRCIsCiAgICAgICAgQ29sb3IgPSBDb2xvcjMuZnJvbUhleCgiIzM0OThkYiIpLAogICAgICAgIEp1c3RpZnkgPSAiQ2VudGVyIiwKICAgICAgICBJY29uID0gImNvcHkiLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICBzZXRjbGlwYm9hcmQodG9zdHJpbmcoZ2FtZS5QbGFjZUlkKSkKICAgICAgICAgICAgV2luZFVJOk5vdGlmeSh7CiAgICAgICAgICAgICAgICBUaXRsZSA9ICJMZWdpdHh3eCIsCiAgICAgICAgICAgICAgICBDb250ZW50ID0gIkdhbWUgSUQgY29waWVkIHRvIGNsaXBib2FyZCEiCiAgICAgICAgICAgIH0pCiAgICAgICAgZW5kCiAgICB9KQplbmQKCkhvbWVUYWI6U3BhY2UoKQoKSG9tZVRhYjpUb2dnbGUoewogICAgVGl0bGUgPSAiQW50aSBBRksiLAogICAgSWNvbiA9ICJhY3Rpdml0eSIsCiAgICBEZWZhdWx0ID0gdHJ1ZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpCiAgICAgICAgaWYgc3RhdGUgdGhlbgogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHdoaWxlIHN0YXRlIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IExvY2FsUGxheWVyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgVmlydHVhbFVzZXI6QnV0dG9uMkRvd24oVmVjdG9yMi5uZXcoMCwgMCksIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZSkKICAgICAgICAgICAgICAgICAgICBWaXJ0dWFsVXNlcjpCdXR0b24yVXAoVmVjdG9yMi5uZXcoMCwgMCksIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZSkKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoNDApCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCn0pCgpIb21lVGFiOkRpdmlkZXIoKQoKSG9tZVRhYjpLZXliaW5kKHsKICAgIFRpdGxlID0gIlVJIEtleWJpbmQiLAogICAgRGVzYyA9ICJLZXliaW5kIHRvIG9wZW4gYW5kIGNsb3NlIFVJIiwKICAgIFZhbHVlID0gIlYiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2KQogICAgICAgIFdpbmRvdzpTZXRUb2dnbGVLZXkoRW51bS5LZXlDb2RlW3ZdKQogICAgZW5kCn0pCgpIb21lVGFiOkRpdmlkZXIoKQoKSG9tZVRhYjpQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAiQ2hhbmdlTG9ncyAtIFYxLjAiLAogICAgRGVzYyA9IFtbClsjXSBTY3JpcHQgUmVsZWFzZQogICAgXV0KfSkKCi0tID09PT09PT09PT09PT09PT09PT09PT0gSU5GT1JNQVRJT04gVEFCID09PT09PT09PT09PT09PT09PT09PT0KSW5mb1RhYjpTZWN0aW9uKHsKICAgIFRpdGxlID0gIkFwZXggSW5mb3JtYXRpb24iLAogICAgSWNvbiA9ICJpbmZvIiwKICAgIFRleHRYQWxpZ25tZW50ID0gIkNlbnRlciIsCiAgICBUZXh0U2l6ZSA9IDE3LAp9KQoKLS0gRGlzY29yZCBJbmZvIEZ1bmN0aW9uYWxpdHkKaWYgbm90IHVpIHRoZW4gdWkgPSB7fSBlbmQKaWYgbm90IHVpLkNyZWF0b3IgdGhlbiB1aS5DcmVhdG9yID0ge30gZW5kCgpsb2NhbCB2YXJfczd6ZXpqIFNhZmVSZXF1ZXN0KHJlcXVlc3REYXRhKQogICAgbG9jYWwgdmFyX2g4aXd5NSA9IGdhbWU6R2V0U2VydmljZSgiSHR0cFNlcnZpY2UiKQogICAgbG9jYWwgdmFyXzR3NW91NSwgcmVzdWx0ID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGlmIHN5biBhbmQgc3luLnJlcXVlc3QgdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfd2QybXR2ID0gc3luLnJlcXVlc3QocmVxdWVzdERhdGEpCiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBCb2R5ID0gcmVzcG9uc2UuQm9keSwKICAgICAgICAgICAgICAgIFN0YXR1c0NvZGUgPSByZXNwb25zZS5TdGF0dXNDb2RlLAogICAgICAgICAgICAgICAgU3VjY2VzcyA9IHJlc3BvbnNlLlN1Y2Nlc3MKICAgICAgICAgICAgfQogICAgICAgIGVsc2VpZiByZXF1ZXN0IGFuZCB0eXBlKHJlcXVlc3QpID09ICJmdW5jdGlvbiIgdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfMjF2bTcyID0gcmVxdWVzdChyZXF1ZXN0RGF0YSkKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIEJvZHkgPSByZXNwb25zZS5Cb2R5LAogICAgICAgICAgICAgICAgU3RhdHVzQ29kZSA9IHJlc3BvbnNlLlN0YXR1c0NvZGUsCiAgICAgICAgICAgICAgICBTdWNjZXNzID0gcmVzcG9uc2UuU3VjY2VzcwogICAgICAgICAgICB9CiAgICAgICAgZWxzZWlmIGh0dHAgYW5kIGh0dHAucmVxdWVzdCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHZhcl9iYWhqYWsgPSBodHRwLnJlcXVlc3QocmVxdWVzdERhdGEpCiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBCb2R5ID0gcmVzcG9uc2UuQm9keSwKICAgICAgICAgICAgICAgIFN0YXR1c0NvZGUgPSByZXNwb25zZS5TdGF0dXNDb2RlLAogICAgICAgICAgICAgICAgU3VjY2VzcyA9IHJlc3BvbnNlLlN1Y2Nlc3MKICAgICAgICAgICAgfQogICAgICAgIGVsc2VpZiBIdHRwU2VydmljZS5SZXF1ZXN0QXN5bmMgdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfYnB6bG1uID0gSHR0cFNlcnZpY2U6UmVxdWVzdEFzeW5jKHsKICAgICAgICAgICAgICAgIFVybCA9IHJlcXVlc3REYXRhLlVybCwKICAgICAgICAgICAgICAgIE1ldGhvZCA9IHJlcXVlc3REYXRhLk1ldGhvZCBvciAiR0VUIiwKICAgICAgICAgICAgICAgIEhlYWRlcnMgPSByZXF1ZXN0RGF0YS5IZWFkZXJzIG9yIHt9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBCb2R5ID0gcmVzcG9uc2UuQm9keSwKICAgICAgICAgICAgICAgIFN0YXR1c0NvZGUgPSByZXNwb25zZS5TdGF0dXNDb2RlLAogICAgICAgICAgICAgICAgU3VjY2VzcyA9IHJlc3BvbnNlLlN1Y2Nlc3MKICAgICAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICAgICAgbG9jYWwgdmFyX3Q1eXJjYSA9IEh0dHBTZXJ2aWNlOkdldEFzeW5jKHJlcXVlc3REYXRhLlVybCkKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIEJvZHkgPSBib2R5LAogICAgICAgICAgICAgICAgU3RhdHVzQ29kZSA9IDIwMCwKICAgICAgICAgICAgICAgIFN1Y2Nlc3MgPSB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICBlbmQKICAgIGVuZCkKCiAgICBpZiBzdWNjZXNzIHRoZW4KICAgICAgICByZXR1cm4gcmVzdWx0CiAgICBlbHNlCiAgICAgICAgd2FybigiSFRUUCBSZXF1ZXN0IGZhaWxlZDoiLCByZXN1bHQpCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgQm9keSA9ICJ7fSIsCiAgICAgICAgICAgIFN0YXR1c0NvZGUgPSAwLAogICAgICAgICAgICBTdWNjZXNzID0gZmFsc2UsCiAgICAgICAgICAgIEVycm9yID0gdG9zdHJpbmcocmVzdWx0KQogICAgICAgIH0KICAgIGVuZAplbmQKCmxvY2FsIHZhcl9tbDJyenAgUmV0cnlSZXF1ZXN0KHJlcXVlc3REYXRhLCByZXRyaWVzKQogICAgcmV0cmllcyA9IHJldHJpZXMgb3IgMgogICAgZm9yIGkgPSAxLCByZXRyaWVzIGRvCiAgICAgICAgbG9jYWwgdmFyX3lxaHFicyA9IFNhZmVSZXF1ZXN0KHJlcXVlc3REYXRhKQogICAgICAgIGlmIHJlc3VsdC5TdWNjZXNzIGFuZCByZXN1bHQuU3RhdHVzQ29kZSA9PSAyMDAgdGhlbgogICAgICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgICAgZW5kCiAgICAgICAgdGFzay53YWl0KDEpCiAgICBlbmQKICAgIHJldHVybiB7CiAgICAgICAgU3VjY2VzcyA9IGZhbHNlLCBFcnJvciA9ICJNYXggcmV0cmllcyByZWFjaGVkIgogICAgfQplbmQKCmxvY2FsIHZhcl80NjBqeWogPSAiZjhGOWhKWm5KWSIKbG9jYWwgdmFyXzB3NW92NSA9ICJodHRwczovL2Rpc2NvcmQuY29tL2FwaS92MTAvaW52aXRlcy8iIC4uIEludml0ZUNvZGUgLi4gIj93aXRoX2NvdW50cz10cnVlJndpdGhfZXhwaXJhdGlvbj10cnVlIgoKbG9jYWwgdmFyX2Z0dWphNyBMb2FkRGlzY29yZEluZm8oKQogICAgbG9jYWwgdmFyXzF4aWZ2dSwgcmVzdWx0ID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHJldHVybiBIdHRwU2VydmljZTpKU09ORGVjb2RlKFJldHJ5UmVxdWVzdCh7CiAgICAgICAgICAgIFVybCA9IERpc2NvcmRBUEksCiAgICAgICAgICAgIE1ldGhvZCA9ICJHRVQiLAogICAgICAgICAgICBIZWFkZXJzID0gewogICAgICAgICAgICAgICAgWyJVc2VyLUFnZW50Il0gPSAiUm9ibG94Qm90LzEuMCIsCiAgICAgICAgICAgICAgICBbIkFjY2VwdCJdID0gImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgICAgIH0KICAgICAgICB9KS5Cb2R5KQogICAgZW5kKQoKICAgIGlmIHN1Y2Nlc3MgYW5kIHJlc3VsdCBhbmQgcmVzdWx0Lmd1aWxkIHRoZW4KICAgICAgICBsb2NhbCB2YXJfdzdzbXA2ID0gSW5mb1RhYjpQYXJhZ3JhcGgoewogICAgICAgICAgICBUaXRsZSA9IHJlc3VsdC5ndWlsZC5uYW1lLAogICAgICAgICAgICBEZXNjID0gJyA8Zm9udCBjb2xvcj0iIzUyNTI1YiI+PzwvZm9udD4gTWVtYmVyIENvdW50IDogJyAuLiB0b3N0cmluZyhyZXN1bHQuYXBwcm94aW1hdGVfbWVtYmVyX2NvdW50KSAuLgogICAgICAgICAgICAgICAgJ1xuIDxmb250IGNvbG9yPSIjMTZhMzRhIj4/PC9mb250PiBPbmxpbmUgQ291bnQgOiAnIC4uIHRvc3RyaW5nKHJlc3VsdC5hcHByb3hpbWF0ZV9wcmVzZW5jZV9jb3VudCksCiAgICAgICAgICAgIEltYWdlID0gImh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2ljb25zLyIgLi4gcmVzdWx0Lmd1aWxkLmlkIC4uICIvIiAuLiByZXN1bHQuZ3VpbGQuaWNvbiAuLiAiLnBuZz9zaXplPTEwMjQiLAogICAgICAgICAgICBJbWFnZVNpemUgPSA0MiwKICAgICAgICB9KQoKICAgICAgICBJbmZvVGFiOkJ1dHRvbih7CiAgICAgICAgICAgIFRpdGxlID0gIlVwZGF0ZSBJbmZvIiwKICAgICAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfZm9ub3ZyLCB1cGRhdGVkUmVzdWx0ID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBIdHRwU2VydmljZTpKU09ORGVjb2RlKFJldHJ5UmVxdWVzdCh7CiAgICAgICAgICAgICAgICAgICAgICAgIFVybCA9IERpc2NvcmRBUEksCiAgICAgICAgICAgICAgICAgICAgICAgIE1ldGhvZCA9ICJHRVQiLAogICAgICAgICAgICAgICAgICAgIH0pLkJvZHkpCiAgICAgICAgICAgICAgICBlbmQpCgogICAgICAgICAgICAgICAgaWYgdXBkYXRlZCBhbmQgdXBkYXRlZFJlc3VsdCBhbmQgdXBkYXRlZFJlc3VsdC5ndWlsZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgRGlzY29yZEluZm86U2V0RGVzYygKICAgICAgICAgICAgICAgICAgICAgICAgJyA8Zm9udCBjb2xvcj0iIzUyNTI1YiI+PzwvZm9udD4gTWVtYmVyIENvdW50IDogJyAuLiB0b3N0cmluZyh1cGRhdGVkUmVzdWx0LmFwcHJveGltYXRlX21lbWJlcl9jb3VudCkgLi4KICAgICAgICAgICAgICAgICAgICAgICAgJ1xuIDxmb250IGNvbG9yPSIjMTZhMzRhIj4/PC9mb250PiBPbmxpbmUgQ291bnQgOiAnIC4uIHRvc3RyaW5nKHVwZGF0ZWRSZXN1bHQuYXBwcm94aW1hdGVfcHJlc2VuY2VfY291bnQpCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIFdpbmRVSTpOb3RpZnkoewogICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJEaXNjb3JkIEluZm8gVXBkYXRlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIENvbnRlbnQgPSAiU3VjY2Vzc2Z1bGx5IHJlZnJlc2hlZCBEaXNjb3JkIHN0YXRpc3RpY3MiLAogICAgICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDIsCiAgICAgICAgICAgICAgICAgICAgICAgIEljb24gPSAicmVmcmVzaC1jdyIsCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBXaW5kVUk6Tm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSAiVXBkYXRlIEZhaWxlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIENvbnRlbnQgPSAiQ291bGQgbm90IHJlZnJlc2ggRGlzY29yZCBpbmZvIiwKICAgICAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSAzLAogICAgICAgICAgICAgICAgICAgICAgICBJY29uID0gImFsZXJ0LXRyaWFuZ2xlIiwKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIH0pCgogICAgICAgIEluZm9UYWI6QnV0dG9uKHsKICAgICAgICAgICAgVGl0bGUgPSAiQ29weSBEaXNjb3JkIEludml0ZSIsCiAgICAgICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgc2V0Y2xpcGJvYXJkKCJodHRwczovL2Rpc2NvcmQuZ2cvIiAuLiBJbnZpdGVDb2RlKQogICAgICAgICAgICAgICAgV2luZFVJOk5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSAiQ29waWVkISIsCiAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9ICJEaXNjb3JkIGludml0ZSBjb3BpZWQgdG8gY2xpcGJvYXJkIiwKICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDIsCiAgICAgICAgICAgICAgICAgICAgSWNvbiA9ICJjbGlwYm9hcmQtY2hlY2siLAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgZW5kCiAgICAgICAgfSkKICAgIGVsc2UKICAgICAgICBJbmZvVGFiOlBhcmFncmFwaCh7CiAgICAgICAgICAgIFRpdGxlID0gIkRpc2NvcmQgSW5mb3JtYXRpb24iLAogICAgICAgICAgICBEZXNjID0gIkpvaW4gb3VyIERpc2NvcmQgZm9yIHVwZGF0ZXMgYW5kIHN1cHBvcnQhXG5TZXJ2ZXI6IENvbWluZyBTb29uIiwKICAgICAgICAgICAgSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzcyNjg1NDY4Nzg1MjAwIiwKICAgICAgICAgICAgSW1hZ2VTaXplID0gMzAsCiAgICAgICAgfSkKICAgICAgICAKICAgICAgICBJbmZvVGFiOkJ1dHRvbih7CiAgICAgICAgICAgIFRpdGxlID0gIkNvcHkgRGlzY29yZCBJbnZpdGUiLAogICAgICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHNldGNsaXBib2FyZCgiaHR0cHM6Ly9kaXNjb3JkLmdnL2Y4RjloSlpuSlkiKQogICAgICAgICAgICAgICAgV2luZFVJOk5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSAiQ29waWVkISIsCiAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9ICJEaXNjb3JkIGxpbmsgY29waWVkIiwKICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDIsCiAgICAgICAgICAgICAgICAgICAgSWNvbiA9ICJjbGlwYm9hcmQtY2hlY2siLAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgZW5kCiAgICAgICAgfSkKICAgIGVuZAplbmQKCkxvYWREaXNjb3JkSW5mbygpCgpJbmZvVGFiOkRpdmlkZXIoKQoKSW5mb1RhYjpQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAiQXBleCBTb2Z0d29ya3MgVGVhbSIsCiAgICBEZXNjID0gIkZvdW5kZXI6IEthaXNlbFxuRGV2ZWxvcGVyOiBFbHZpc1xuVUkgRGVzaWduZXI6IEVsdmlzXG5TY3JpcHQgTWFpbnRhaW5lcjogRWx2aXMiLAogICAgSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzcyNjg1NDY4Nzg1MjAwIiwKICAgIEltYWdlU2l6ZSA9IDMwLAogICAgVGh1bWJuYWlsID0gIiIsCiAgICBUaHVtYm5haWxTaXplID0gMCwKICAgIExvY2tlZCA9IGZhbHNlLAp9KQoKSW5mb1RhYjpQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAiU2NyaXB0IEluZm9ybWF0aW9uIiwKICAgIERlc2MgPSAiVmVyc2lvbjogIiAuLiB2ZXJzaW9uIC4uICJcbkdhbWU6IFBsYW50cyBWcyBCcmFpbnJvdHNcblN0YXR1czogUHJlbWl1bSBPbmx5XG5VSSBUaGVtZTogQXBleCBDdXN0b20iLAogICAgSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzcyNjg1NDY4Nzg1MjAwIiwKICAgIEltYWdlU2l6ZSA9IDMwLAogICAgVGh1bWJuYWlsID0gIiIsCiAgICBUaHVtYm5haWxTaXplID0gMCwKICAgIExvY2tlZCA9IGZhbHNlLAp9KQoKSW5mb1RhYjpCdXR0b24oewogICAgVGl0bGUgPSAiQ29weSBHYW1lIElEIiwKICAgIEljb24gPSAiY29weSIsCiAgICBDb2xvciA9IENvbG9yMy5mcm9tSGV4KCIjMzQ5OGRiIiksCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBzZXRjbGlwYm9hcmQodG9zdHJpbmcoZ2FtZS5QbGFjZUlkKSkKICAgICAgICBXaW5kVUk6Tm90aWZ5KHsKICAgICAgICAgICAgVGl0bGUgPSAiSW5mb3JtYXRpb24iLAogICAgICAgICAgICBDb250ZW50ID0gIkdhbWUgSUQgY29waWVkIHRvIGNsaXBib2FyZCEiLAogICAgICAgICAgICBEdXJhdGlvbiA9IDIsCiAgICAgICAgICAgIEljb24gPSAiY2hlY2siLAogICAgICAgIH0pCiAgICBlbmQKfSkKCi0tID09PT09PT09PT09PT09PT09PT09PT0gTUFJTiBUQUIgKE9yaWdpbmFsIExlZ2l0eHd4IEZlYXR1cmVzKSA9PT09PT09PT09PT09PT09PT09PT09Ck1haW5UYWI6U2VjdGlvbih7IFRpdGxlID0gIkF1dG8gRmFybSIsIEljb24gPSAiYmFja3BhY2siIH0pCgpNYWluVGFiOlBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJZb3VyIFN0YXR1cyIsCiAgICBEZXNjID0gIlsrXSBTaG93IFBsb3RzIFxuWytdIFNob3cgUmViaXJ0aCBcblsrXSBTaG93IE1vbmV5IFxuWytdIFNob3cgUGxheXRpbWUiLAogICAgSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzcyNjg1NDY4Nzg1MjAwIiwKICAgIEltYWdlU2l6ZSA9IDUwLAogICAgTG9ja2VkID0gZmFsc2UsCiAgICBCdXR0b25zID0gewogICAgICAgIHsKICAgICAgICAgICAgSWNvbiA9ICJpbmZvIiwKICAgICAgICAgICAgVGl0bGUgPSAiU2hvdyBTdGF0dXMiLAogICAgICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9xbml0ZmMgPSAiWW91ciBTdGF0dXNcbiIKICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlIC4uICJQbG90czogIiAuLiBHZXRNeVBsb3ROYW1lKCkgLi4gIlxuIgogICAgICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UgLi4gIlJlYmlydGg6ICIgLi4gR2V0UmViaXJ0aCgpIC4uICJcbiIKICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlIC4uICJNb25leTogIiAuLiBHZXRNb25leSgpIC4uICJcbiIKICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlIC4uICJQbGF5dGltZTogIiAuLiBGb3JtYXRUaW1lKG9zLnRpbWUoKSAtIHNlcnZlclN0YXJ0VGltZSkKCiAgICAgICAgICAgICAgICBXaW5kVUk6Tm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICBUaXRsZSA9IlN0YXR1cyIsCiAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9IG1lc3NhZ2UsCiAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSAyLAogICAgICAgICAgICAgICAgICAgIEljb24gPSAidXNlci1jaGVjayIsCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICBlbmQKICAgICAgICB9CiAgICB9Cn0pCgotLSA9PT09PT09PT09PT09PT09PT09PT09IEJSQUlOUk9UUyBDQUNIRSA9PT09PT09PT09PT09PT09PT09PT09CmxvY2FsIHZhcl95czVpcGYgPSB7fQoKbG9jYWwgdmFyX214NjMyYSBVcGRhdGVCcmFpbnJvdHNDYWNoZSgpCiAgICBsb2NhbCB2YXJfYzd0N3lpLCBmb2xkZXIgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgcmV0dXJuIFdvcmtzcGFjZTpXYWl0Rm9yQ2hpbGQoIlNjcmlwdGVkTWFwIik6V2FpdEZvckNoaWxkKCJCcmFpbnJvdHMiKQogICAgZW5kKQogICAgaWYgbm90IG9rIG9yIG5vdCBmb2xkZXIgdGhlbiByZXR1cm4gZW5kCiAgICBCcmFpbnJvdHNDYWNoZSA9IHt9CiAgICBmb3IgXywgYiBpbiBpcGFpcnMoZm9sZGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgYjpGaW5kRmlyc3RDaGlsZCgiQnJhaW5yb3RIaXRib3giKSB0aGVuCiAgICAgICAgICAgIHRhYmxlLmluc2VydChCcmFpbnJvdHNDYWNoZSwgYikKICAgICAgICBlbmQKICAgIGVuZAplbmQKCmxvY2FsIHZhcl9mMHlvZ2QgR2V0TmVhcmVzdEJyYWlucm90KCkKICAgIGxvY2FsIHZhcl84ZXhhd2ogPSBuaWwKICAgIGxvY2FsIHZhcl90eXQyamcgPSBtYXRoLmh1Z2UKICAgIGZvciBfLCBiIGluIGlwYWlycyhCcmFpbnJvdHNDYWNoZSkgZG8KICAgICAgICBsb2NhbCB2YXJfNXVsd3lhID0gYjpGaW5kRmlyc3RDaGlsZCgiQnJhaW5yb3RIaXRib3giKQogICAgICAgIGlmIGhpdGJveCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHZhcl9oY3oxeWwgPSAoSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIGhpdGJveC5Qb3NpdGlvbikuTWFnbml0dWRlCiAgICAgICAgICAgIGlmIGRpc3QgPCBtaW5EaXN0IHRoZW4KICAgICAgICAgICAgICAgIG1pbkRpc3QgPSBkaXN0CiAgICAgICAgICAgICAgICBuZWFyZXN0ID0gYgogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIG5lYXJlc3QKZW5kCgotLSA9PT09PT09PT09PT09PT09PT09PT09IFVUSUxJVFkgRlVOQ1RJT05TID09PT09PT09PT09PT09PT09PT09PT0KbG9jYWwgdmFyX3N4a2w3diA9IG5pbAoKbG9jYWwgdmFyX2xmOThmeCBFcXVpcEJhdCgpCiAgICBmb3IgXywgdG9vbE5hbWUgaW4gaXBhaXJzKEhlbGRUb29sTmFtZXMpIGRvCiAgICAgICAgbG9jYWwgdmFyX2l4ejVweSA9IEJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvb2xOYW1lKSBvciBDaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQodG9vbE5hbWUpCiAgICAgICAgaWYgdG9vbCB0aGVuCiAgICAgICAgICAgIHRvb2wuUGFyZW50ID0gQ2hhcmFjdGVyCiAgICAgICAgICAgIEhlbGRUb29sTmFtZSA9IHRvb2xOYW1lCiAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBmYWxzZQplbmQKCmxvY2FsIHZhcl9oOWQxZTYgSW5zdGFudFdhcnBUb0JyYWlucm90KGJyYWlucm90KQogICAgbG9jYWwgdmFyX2doaTJ2ZyA9IGJyYWlucm90IGFuZCBicmFpbnJvdDpGaW5kRmlyc3RDaGlsZCgiQnJhaW5yb3RIaXRib3giKQogICAgaWYgaGl0Ym94IHRoZW4KICAgICAgICBsb2NhbCB2YXJfZDNpaHg0ID0gVmVjdG9yMy5uZXcoMCwgMC42OSwgMi41KQogICAgICAgIEh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhoaXRib3guUG9zaXRpb24gKyBvZmZzZXQsIGhpdGJveC5Qb3NpdGlvbikKICAgIGVuZAplbmQKCmxvY2FsIHZhcl9mYTJ2dHkgRG9DbGljaygpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgVmlydHVhbFVzZXI6QnV0dG9uMURvd24oVmVjdG9yMi5uZXcoMCwgMCkpCiAgICAgICAgdGFzay53YWl0KDAuMDUpCiAgICAgICAgVmlydHVhbFVzZXI6QnV0dG9uMVVwKFZlY3RvcjIubmV3KDAsIDApKQogICAgZW5kKQplbmQKCi0tID09PT09PT09PT09PT09PT09PT09PT0gQVVUTyBGQVJNID09PT09PT09PT09PT09PT09PT09PT0KTWFpblRhYjpUb2dnbGUoewogICAgVGl0bGUgPSAiQXV0byBGYXJtIiwKICAgIERlc2NyaXB0aW9uID0gIkF1dG9tYXRpY2FsbHkgYXR0YWNrIGFwcHJvYWNoaW5nIEJyYWlucm90IGZhc3RlciIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQogICAgICAgIEF1dG9GYXJtID0gc3RhdGUKICAgICAgICBhdXRvQ2xpY2tpbmcgPSBzdGF0ZQoKICAgICAgICBpZiBzdGF0ZSB0aGVuCiAgICAgICAgICAgIEVxdWlwQmF0KCkKICAgICAgICAgICAgVXBkYXRlQnJhaW5yb3RzQ2FjaGUoKQoKICAgICAgICAgICAgLS0gQVVUTyBDTElDS0VSCiAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgd2hpbGUgYXV0b0NsaWNraW5nIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgQ2hhcmFjdGVyIGFuZCBDaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoSGVsZFRvb2xOYW1lKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIERvQ2xpY2soKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChDbGlja0ludGVydmFsKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKCiAgICAgICAgICAgIC0tIEFVVE8gRVFVSVAKICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICB3aGlsZSBBdXRvRmFybSBkbwogICAgICAgICAgICAgICAgICAgIGlmIENoYXJhY3RlciBhbmQgbm90IENoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChIZWxkVG9vbE5hbWUpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBCYXQoKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjI1KQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKCiAgICAgICAgICAgIC0tIEJSQUlOUk9UUyBDQUNIRSBSRUZSRVNICiAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgd2hpbGUgQXV0b0Zhcm0gZG8KICAgICAgICAgICAgICAgICAgICBVcGRhdGVCcmFpbnJvdHNDYWNoZSgpCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMjUpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQoKICAgICAgICAgICAgLS0gQVVUTyBGQVJNIEJSQUlOUk9UCiAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgd2hpbGUgQXV0b0Zhcm0gZG8KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfeXR6dHphID0gR2V0TmVhcmVzdEJyYWlucm90KCkKICAgICAgICAgICAgICAgICAgICBpZiBjdXJyZW50VGFyZ2V0IGFuZCBjdXJyZW50VGFyZ2V0OkZpbmRGaXJzdENoaWxkKCJCcmFpbnJvdEhpdGJveCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgSW5zdGFudFdhcnBUb0JyYWlucm90KGN1cnJlbnRUYXJnZXQpCiAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl82bWhvZWogPSBHZXRSZW1vdGVzRm9sZGVyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJlbW90ZXMgYW5kIHJlbW90ZXM6RmluZEZpcnN0Q2hpbGQoIkF0dGFja3NTZXJ2ZXIiKSBhbmQgcmVtb3Rlcy5BdHRhY2tzU2VydmVyOkZpbmRGaXJzdENoaWxkKCJXZWFwb25BdHRhY2siKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3Rlcy5BdHRhY2tzU2VydmVyLldlYXBvbkF0dGFjazpGaXJlU2VydmVyKHsgeyB0YXJnZXQgPSBjdXJyZW50VGFyZ2V0LkJyYWlucm90SGl0Ym94IH0gfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfMW1ldzRjLCBfID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZXBsaWNhdGVkU3RvcmFnZS5SZW1vdGVzLkF0dGFja3NTZXJ2ZXIuV2VhcG9uQXR0YWNrOkZpcmVTZXJ2ZXIoeyB7IHRhcmdldCA9IGN1cnJlbnRUYXJnZXQuQnJhaW5yb3RIaXRib3ggfSB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KENsaWNrSW50ZXJ2YWwpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQoKICAgICAgICBlbHNlCiAgICAgICAgICAgIGF1dG9DbGlja2luZyA9IGZhbHNlCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCi0tID09PT09PT09PT09PT09PT09PT09PT0gQVVUTyBDT0xMRUNUID09PT09PT09PT09PT09PT09PT09PT0KbG9jYWwgdmFyX2dvcjd1eCBHZXROZWFyZXN0UGxvdCgpCiAgICBsb2NhbCB2YXJfbXRmZmNuID0gbmlsCiAgICBsb2NhbCB2YXJfeW1oaDZ5ID0gbWF0aC5odWdlCiAgICBmb3IgXywgcGxvdCBpbiBpcGFpcnMoV29ya3NwYWNlLlBsb3RzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgcGxvdDpJc0EoIkZvbGRlciIpIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyX3FlMXRkcCA9IHBsb3Q6RmluZEZpcnN0Q2hpbGQoIkNlbnRlciIpIG9yIHBsb3Q6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiQmFzZVBhcnQiKQogICAgICAgICAgICBpZiBjZW50ZXIgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdmFyXzNuanRndiA9IChIdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gY2VudGVyLlBvc2l0aW9uKS5NYWduaXR1ZGUKICAgICAgICAgICAgICAgIGlmIGRpc3QgPCBtaW5EaXN0IHRoZW4KICAgICAgICAgICAgICAgICAgICBtaW5EaXN0ID0gZGlzdAogICAgICAgICAgICAgICAgICAgIG5lYXJlc3RQbG90ID0gcGxvdAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gbmVhcmVzdFBsb3QKZW5kCgpsb2NhbCB2YXJfc3Rvb2FnIENvbGxlY3RGcm9tUGxvdChwbG90KQogICAgaWYgbm90IHBsb3QgdGhlbiByZXR1cm4gZW5kCiAgICBsb2NhbCB2YXJfbXZ1czJpID0gcGxvdDpGaW5kRmlyc3RDaGlsZCgiQnJhaW5yb3RzIikKICAgIGlmIG5vdCBicmFpbnJvdHNGb2xkZXIgdGhlbiByZXR1cm4gZW5kCgogICAgZm9yIGkgPSAxLCAxNyBkbwogICAgICAgIGxvY2FsIHZhcl9mMXhtMzkgPSBicmFpbnJvdHNGb2xkZXI6RmluZEZpcnN0Q2hpbGQodG9zdHJpbmcoaSkpCiAgICAgICAgaWYgc2xvdCBhbmQgc2xvdDpGaW5kRmlyc3RDaGlsZCgiQnJhaW5yb3QiKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHZhcl96MWN0aXQgPSBzbG90OkZpbmRGaXJzdENoaWxkKCJCcmFpbnJvdCIpCiAgICAgICAgICAgIGlmIGJyYWlucm90OkZpbmRGaXJzdENoaWxkKCJCcmFpbnJvdEhpdGJveCIpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9heXE5bGUgPSBicmFpbnJvdC5CcmFpbnJvdEhpdGJveAogICAgICAgICAgICAgICAgbG9jYWwgdmFyXzV4b3lvdiA9IFZlY3RvcjMubmV3KDAsIDEsIDMpCiAgICAgICAgICAgICAgICBIdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoaGl0Ym94LlBvc2l0aW9uICsgb2Zmc2V0LCBoaXRib3guUG9zaXRpb24pCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4yKQogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9ncGt5NjMgPSBHZXRSZW1vdGVzRm9sZGVyKCkKICAgICAgICAgICAgICAgICAgICBpZiByZW1vdGVzIGFuZCByZW1vdGVzOkZpbmRGaXJzdENoaWxkKCJBdHRhY2tzU2VydmVyIikgYW5kIHJlbW90ZXMuQXR0YWNrc1NlcnZlcjpGaW5kRmlyc3RDaGlsZCgiV2VhcG9uQXR0YWNrIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVzLkF0dGFja3NTZXJ2ZXIuV2VhcG9uQXR0YWNrOkZpcmVTZXJ2ZXIoeyB7IHRhcmdldCA9IGhpdGJveCB9IH0pCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBSZXBsaWNhdGVkU3RvcmFnZS5SZW1vdGVzLkF0dGFja3NTZXJ2ZXIuV2VhcG9uQXR0YWNrOkZpcmVTZXJ2ZXIoeyB7IHRhcmdldCA9IGhpdGJveCB9IH0pCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZAoKQ29sbGVjdFRhYjpTZWN0aW9uKHsgVGl0bGUgPSAiQXV0byBDb2xsZWN0IiwgSWNvbiA9ICJoYW5kLWNvaW5zIiB9KQoKQ29sbGVjdFRhYjpTbGlkZXIoewogICAgVGl0bGUgPSAiQXV0byBDb2xsZWN0IERlbGF5IChzZWMpIiwKICAgIERlc2NyaXB0aW9uID0gIlNldCBkZWxheSB0aW1lIGJldHdlZW4gY29sbGVjdGlvbnMiLAogICAgVmFsdWUgPSB7TWluID0gMSwgTWF4ID0gMzAwLCBEZWZhdWx0ID0gMjB9LAogICAgU3RlcCA9IDEsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHZhbCkKICAgICAgICBBdXRvQ29sbGVjdERlbGF5ID0gdmFsCiAgICBlbmQKfSkKCkNvbGxlY3RUYWI6VG9nZ2xlKHsKICAgIFRpdGxlID0gIkF1dG8gQ29sbGVjdCBNb25leSIsCiAgICBEZXNjcmlwdGlvbiA9ICJBdXRvbWF0aWNhbGx5IFRlbGVwb3J0IHRvIENvbGxlY3QiLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkKICAgICAgICBBdXRvQ29sbGVjdCA9IHN0YXRlCiAgICAgICAgaWYgc3RhdGUgdGhlbgogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHdoaWxlIEF1dG9Db2xsZWN0IGRvCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX21tYjgzZiA9IEdldE5lYXJlc3RQbG90KCkKICAgICAgICAgICAgICAgICAgICBpZiBuZWFyZXN0UGxvdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIENvbGxlY3RGcm9tUGxvdChuZWFyZXN0UGxvdCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoQXV0b0NvbGxlY3REZWxheSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCkNvbGxlY3RUYWI6VG9nZ2xlKHsKICAgIFRpdGxlID0gIkF1dG8gQ29sbGVjdCBNb25leSBWMiIsCiAgICBEZXNjcmlwdGlvbiA9ICJBdXRvbWF0aWNhbGx5IENvbGxlY3QgV2l0aG91dCBUZWxlcG9ydCIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQogICAgICAgIEF1dG9Db2xsZWN0VjIgPSBzdGF0ZQogICAgICAgIGlmIHN0YXRlIGFuZCBub3QgQXV0b0NvbGxlY3RWMlJ1bm5pbmcgdGhlbgogICAgICAgICAgICBBdXRvQ29sbGVjdFYyUnVubmluZyA9IHRydWUKICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICB3aGlsZSBBdXRvQ29sbGVjdFYyIGRvCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOldhaXRGb3JDaGlsZCgiUmVtb3RlcyIpOldhaXRGb3JDaGlsZCgiRXF1aXBCZXN0QnJhaW5yb3RzIik6RmlyZVNlcnZlcigpCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KEF1dG9Db2xsZWN0RGVsYXkpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIEF1dG9Db2xsZWN0VjJSdW5uaW5nID0gZmFsc2UKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCn0pCgotLSA9PT09PT09PT09PT09PT09PT09PT09IEFVVE8gRVFVSVAgPT09PT09PT09PT09PT09PT09PT09PQpDb2xsZWN0VGFiOlNlY3Rpb24oeyBUaXRsZSA9ICJBdXRvIEVxdWlwIiwgSWNvbiA9ICJzdGFyIiB9KQoKQ29sbGVjdFRhYjpUb2dnbGUoewogICAgVGl0bGUgPSAiQXV0byBFcXVpcCBCZXN0IEJyYWlucm90IiwKICAgIERlc2NyaXB0aW9uID0gIkF1dG9tYXRpY2FsbHkgRXF1aXAgQmVzdCBCcmFpbnJvdCIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQogICAgICAgIEF1dG9FQiA9IHN0YXRlCiAgICAgICAgaWYgc3RhdGUgYW5kIG5vdCBBdXRvRUJSdW5uaW5nIHRoZW4KICAgICAgICAgICAgQXV0b0VCUnVubmluZyA9IHRydWUKICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICB3aGlsZSBBdXRvRUIgZG8KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6V2FpdEZvckNoaWxkKCJSZW1vdGVzIik6V2FpdEZvckNoaWxkKCJFcXVpcEJlc3RCcmFpbnJvdHMiKTpGaXJlU2VydmVyKCkKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoNSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgQXV0b0VCUnVubmluZyA9IGZhbHNlCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKLS0gPT09PT09PT09PT09PT09PT09PT09PSBTRUxMID09PT09PT09PT09PT09PT09PT09PT0KU2VsbFRhYjpTZWN0aW9uKHsgVGl0bGUgPSAiQXV0byBTZWxsIiwgSWNvbiA9ICJkb2xsYXItc2lnbiIgfSkKClNlbGxUYWI6VG9nZ2xlKHsKICAgIFRpdGxlID0gIlNlbGwgQnJhaW5yb3QgQWxsIiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpCiAgICAgICAgU2VsbEJyYWlucm90ID0gc3RhdGUKICAgICAgICB3aGlsZSBTZWxsQnJhaW5yb3QgZG8KICAgICAgICAgICAgdGFzay53YWl0KDAuNSkgCiAgICAgICAgICAgIFJlcGxpY2F0ZWRTdG9yYWdlLlJlbW90ZXMuSXRlbVNlbGw6RmlyZVNlcnZlcigpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKClNlbGxUYWI6VG9nZ2xlKHsKICAgIFRpdGxlID0gIlNlbGwgUGxhbnRzIEFsbCIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQogICAgICAgIFNlbGxQbGFudCA9IHN0YXRlCiAgICAgICAgd2hpbGUgU2VsbFBsYW50IGRvCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpCiAgICAgICAgICAgIFJlcGxpY2F0ZWRTdG9yYWdlLlJlbW90ZXMuSXRlbVNlbGw6RmlyZVNlcnZlcigpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKClNlbGxUYWI6U2VjdGlvbih7IFRpdGxlID0gIlNlbGwgRXZlcnl0aGluZyIsIEljb24gPSAiZ2VtIiB9KQoKU2VsbFRhYjpUb2dnbGUoewogICAgVGl0bGUgPSAiU2VsbCBCb3RoIEFsbCIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQogICAgICAgIFNlbGxFdmVyeXRoaW5nID0gc3RhdGUKICAgICAgICB3aGlsZSBTZWxsRXZlcnl0aGluZyBkbwogICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICBSZXBsaWNhdGVkU3RvcmFnZS5SZW1vdGVzLkl0ZW1TZWxsOkZpcmVTZXJ2ZXIoKQogICAgICAgIGVuZAogICAgZW5kCn0pCgotLSA9PT09PT09PT09PT09PT09PT09PT0gU0hPUCBVSSA9PT09PT09PT09PT09PT09PT09PT0KU2hvcFRhYjpTZWN0aW9uKHsgVGl0bGUgPSAiQnV5IFNlZWQiLCBJY29uID0gImxlYWYiIH0pCgpTaG9wVGFiOkRyb3Bkb3duKHsKICAgIFRpdGxlID0gIlNlbGVjdCBTZWVkIiwKICAgIFZhbHVlcyA9IHNob3Auc2VlZExpc3QsCiAgICBNdWx0aSA9IHRydWUsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHZhbHVlcykKICAgICAgICBzZWxlY3RlZFNlZWRzID0gdmFsdWVzCiAgICBlbmQKfSkKCi0tIEF1dG8gQnV5IFNlZWQgKFNlbGVjdGVkIC0gbG9vcCBieSBvcmRlcikKU2hvcFRhYjpUb2dnbGUoewogICAgVGl0bGUgPSAiQXV0byBCdXkgU2VlZCAoU2VsZWN0ZWQpIiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpCiAgICAgICAgQXV0b0J1eVNlbGVjdGVkU2VlZCA9IHN0YXRlCiAgICAgICAgaWYgc3RhdGUgdGhlbgogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHdoaWxlIEF1dG9CdXlTZWxlY3RlZFNlZWQgZG8KICAgICAgICAgICAgICAgICAgICBpZiAjc2VsZWN0ZWRTZWVkcyA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgc2VlZCBpbiBpcGFpcnMoc2VsZWN0ZWRTZWVkcykgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBBdXRvQnV5U2VsZWN0ZWRTZWVkIHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfZHZvM2dhID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOldhaXRGb3JDaGlsZCgiUmVtb3RlcyIpOldhaXRGb3JDaGlsZCgiQnV5SXRlbSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCdXlTZWVkUmVtb3RlOkZpcmVTZXJ2ZXIoc2VlZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjMpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCn0pCgotLSBBdXRvIEJ1eSBTZWVkIChBbGwgLSBsb29wIGZ1bGwgbGlzdCkKU2hvcFRhYjpUb2dnbGUoewogICAgVGl0bGUgPSAiQXV0byBCdXkgU2VlZCAoQWxsKSIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQogICAgICAgIEF1dG9CdXlBbGxTZWVkID0gc3RhdGUKICAgICAgICBpZiBzdGF0ZSB0aGVuCiAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgd2hpbGUgQXV0b0J1eUFsbFNlZWQgZG8KICAgICAgICAgICAgICAgICAgICBmb3IgXywgc2VlZCBpbiBpcGFpcnMoc2hvcC5zZWVkTGlzdCkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IEF1dG9CdXlBbGxTZWVkIHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9wMGV0N2sgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6V2FpdEZvckNoaWxkKCJSZW1vdGVzIik6V2FpdEZvckNoaWxkKCJCdXlJdGVtIikKICAgICAgICAgICAgICAgICAgICAgICAgQnV5U2VlZFJlbW90ZTpGaXJlU2VydmVyKHNlZWQpCiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjMpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCi0tID09PT09PT09PT09PT09PT09PSBHRUFSID09PT09PT09PT09PT09PT09PQpTaG9wVGFiOlNlY3Rpb24oeyBUaXRsZSA9ICJCdXkgR2VhciIsIEljb24gPSAicGFja2FnZSIgfSkKClNob3BUYWI6RHJvcGRvd24oewogICAgVGl0bGUgPSAiU2VsZWN0IEdlYXIiLAogICAgVmFsdWVzID0gc2hvcC5nZWFyTGlzdCwKICAgIE11bHRpID0gdHJ1ZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWVzKQogICAgICAgIHNlbGVjdGVkR2VhcnMgPSB2YWx1ZXMKICAgIGVuZAp9KQoKLS0gQXV0byBCdXkgR2VhciAoU2VsZWN0ZWQgLSBsb29wIGJ5IG9yZGVyKQpTaG9wVGFiOlRvZ2dsZSh7CiAgICBUaXRsZSA9ICJBdXRvIEJ1eSBHZWFyIChTZWxlY3RlZCkiLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkKICAgICAgICBBdXRvQnV5U2VsZWN0ZWRHZWFyID0gc3RhdGUKICAgICAgICBpZiBzdGF0ZSB0aGVuCiAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgd2hpbGUgQXV0b0J1eVNlbGVjdGVkR2VhciBkbwogICAgICAgICAgICAgICAgICAgIGlmICNzZWxlY3RlZEdlYXJzID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCBnZWFyIGluIGlwYWlycyhzZWxlY3RlZEdlYXJzKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IEF1dG9CdXlTZWxlY3RlZEdlYXIgdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl83aDJsMGMgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6V2FpdEZvckNoaWxkKCJSZW1vdGVzIik6V2FpdEZvckNoaWxkKCJCdXlHZWFyIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJ1eUdlYXJSZW1vdGU6RmlyZVNlcnZlcihnZWFyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMykKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCi0tIEF1dG8gQnV5IEdlYXIgKEFsbCAtIGxvb3AgZnVsbCBsaXN0KQpTaG9wVGFiOlRvZ2dsZSh7CiAgICBUaXRsZSA9ICJBdXRvIEJ1eSBHZWFyIChBbGwpIiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpCiAgICAgICAgQXV0b0J1eUFsbEdlYXIgPSBzdGF0ZQogICAgICAgIGlmIHN0YXRlIHRoZW4KICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICB3aGlsZSBBdXRvQnV5QWxsR2VhciBkbwogICAgICAgICAgICAgICAgICAgIGZvciBfLCBnZWFyIGluIGlwYWlycyhzaG9wLmdlYXJMaXN0KSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgQXV0b0J1eUFsbEdlYXIgdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3dqM210eCA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpXYWl0Rm9yQ2hpbGQoIlJlbW90ZXMiKTpXYWl0Rm9yQ2hpbGQoIkJ1eUdlYXIiKQogICAgICAgICAgICAgICAgICAgICAgICBCdXlHZWFyUmVtb3RlOkZpcmVTZXJ2ZXIoZ2VhcikKICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMykKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4xKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKLS0gPT09PT09PT09PT09PT09PT09IFBMQVRGT1JNID09PT09PT09PT09PT09PT09PQpTaG9wVGFiOlNlY3Rpb24oeyBUaXRsZSA9ICJCdXkgUGxhdGZvcm0iLCBJY29uID0gImhvdXNlIiB9KQoKU2hvcFRhYjpEcm9wZG93bih7CiAgICBUaXRsZSA9ICJTZWxlY3QgUGxhdGZvcm0iLAogICAgVmFsdWVzID0gc2hvcC5QbGF0Zm9ybUxpc3QsCiAgICBNdWx0aSA9IHRydWUsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHZhbHVlcykKICAgICAgICBzZWxlY3RlZFBsYXRmb3JtID0gdmFsdWVzCiAgICBlbmQKfSkKClNob3BUYWI6VG9nZ2xlKHsKICAgIFRpdGxlID0gIkF1dG8gQnV5IFBsYXRmb3JtIChTZWxlY3RlZCkiLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkKICAgICAgICBBdXRvQnV5UGxhdGZvcm1TZWxlY3QgPSBzdGF0ZQogICAgICAgIGlmIHN0YXRlIGFuZCAjc2VsZWN0ZWRQbGF0Zm9ybSA+IDAgdGhlbgogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHdoaWxlIHN0YXRlIGRvCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHBsYXRmb3JtIGluIGlwYWlycyhzZWxlY3RlZFBsYXRmb3JtKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfdzg2dGQzID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOldhaXRGb3JDaGlsZCgiUmVtb3RlcyIpOldhaXRGb3JDaGlsZCgiQnV5UGxhdGZvcm0iKQogICAgICAgICAgICAgICAgICAgICAgICBCdXlQbGF0Zm9ybVJlbW90ZTpGaXJlU2VydmVyKHBsYXRmb3JtKQogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4zKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCn0pCgpTaG9wVGFiOlRvZ2dsZSh7CiAgICBUaXRsZSA9ICJBdXRvIEJ1eSBQbGF0Zm9ybSAoQWxsKSIsCiAgICBEZXNjcmlwdGlvbiA9ICJBdXRvbWF0aWNhbGx5IGJ1eSBwbGF0Zm9ybSBmb3IgYnJhaW5yb3Qgc2VjdGlvbiByZWJpcnRoIiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpCiAgICAgICAgQXV0b0J1eVBsYXRmb3JtQWxsID0gc3RhdGUKICAgICAgICBpZiBzdGF0ZSB0aGVuCiAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgd2hpbGUgc3RhdGUgZG8KICAgICAgICAgICAgICAgICAgICBmb3IgXywgcGxhdGZvcm0gaW4gaXBhaXJzKHNob3AuUGxhdGZvcm1MaXN0KSBkbwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfNXVwZnVqID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOldhaXRGb3JDaGlsZCgiUmVtb3RlcyIpOldhaXRGb3JDaGlsZCgiQnV5UGxhdGZvcm0iKQogICAgICAgICAgICAgICAgICAgICAgICBCdXlQbGF0Zm9ybVJlbW90ZTpGaXJlU2VydmVyKHBsYXRmb3JtKQogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4zKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCn0pCgotLSA9PT09PT09PT09PT09PT09PT09PT09IE1JU0MgPT09PT09PT09PT09PT09PT09PT09PQpNaXNjVGFiOlNlY3Rpb24oeyBUaXRsZSA9ICJNaXNjIiwgSWNvbiA9ICJzZXR0aW5ncyIgfSkKCk1pc2NUYWI6VG9nZ2xlKHsKICAgIFRpdGxlID0gIkFudGkgQUZLIiwKICAgIERlc2NyaXB0aW9uID0gIlByZXZlbnQgYmVpbmcga2lja2VkIGZvciBpbmFjdGl2aXR5IiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpCiAgICAgICAgQW50aUFGS0VuYWJsZWQgPSBzdGF0ZQogICAgICAgIGlmIHN0YXRlIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyX21uMzgzZwogICAgICAgICAgICBjb25uID0gUGxheWVycy5Mb2NhbFBsYXllci5JZGxlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIEFudGlBRktFbmFibGVkIHRoZW4KICAgICAgICAgICAgICAgICAgICBWaXJ0dWFsVXNlcjpCdXR0b24yRG93bihWZWN0b3IyLm5ldygwLDApLHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZSkKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4xKQogICAgICAgICAgICAgICAgICAgIFZpcnR1YWxVc2VyOkJ1dHRvbjJVcChWZWN0b3IyLm5ldygwLDApLHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZSkKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBjb25uOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKTWlzY1RhYjpCdXR0b24oewogICAgVGl0bGUgPSAiRlBTIEJvb3N0IiwKICAgIERlc2NyaXB0aW9uID0gIkNsaWNrIHRvIGVuYWJsZSBGUFMgQm9vc3QgYW5kIGltcHJvdmUgZ2FtZSBwZXJmb3JtYW5jZSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBXaW5kVUk6Tm90aWZ5KHsKICAgICAgICAgICAgVGl0bGUgPSAiQm9vc3RyYXAgQm9vc3QiLAogICAgICAgICAgICBDb250ZW50ID0gIlRoZSBGUFMgQm9vc3Qgc2NyaXB0IGlzIGJlaW5nIGV4ZWN1dGVkLi4uIiwKICAgICAgICAgICAgRHVyYXRpb24gPSAyLAogICAgICAgICAgICBJY29uID0gInVzZXItY2hlY2siLAogICAgICAgIH0pCgogICAgICAgIGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vU2NyaXB0R2V0dGVyL0Jvb3N0cmFwL3JlZnMvaGVhZHMvbWFpbi9HYW1lc1RhYi9Vbml2ZXJzYWwiKSkoKQogICAgICAgIAogICAgICAgIFdpbmRVSTpOb3RpZnkoewogICAgICAgICAgICBUaXRsZSA9ICJCb29zdHJhcCBFbmFibGUiLAogICAgICAgICAgICBDb250ZW50ID0gIkZQUyBCb29zdCBzY3JpcHQgaGFzIGJlZW4gZXhlY3V0ZWQgc3VjY2Vzc2Z1bGx5LiIsCiAgICAgICAgICAgIER1cmF0aW9uID0gMiwKICAgICAgICAgICAgSWNvbiA9ICJ1c2VyLWNoZWNrIiwKICAgICAgICB9KQogICAgZW5kCn0pCgotLSBJbml0aWFsIG5vdGlmaWNhdGlvbgpXaW5kVUk6UG9wdXAoewogICAgVGl0bGUgPSAiQXBleCBTb2Z0d29ya3MiLAogICAgSWNvbiA9ICJ6YXAiLAogICAgSWNvblRoZW1lZCA9IHRydWUsCiAgICBUaGVtZSA9ICJDdXN0b20iLAogICAgQ29udGVudCA9ICJXZWxjb21lIHRvIEFwZXggSHViISBPdmVycG93ZXJlZCBzY3JpcHQgZm9yIFBsYW50cyBWcyBCcmFpbnJvdHMgd2l0aCBlbmhhbmNlZCBVSSBleHBlcmllbmNlLiIsCiAgICBCdXR0b25zID0gewogICAgICAgIHsKICAgICAgICAgICAgVGl0bGUgPSAiQ29udGludWUiLAogICAgICAgICAgICBJY29uID0gImFycm93LXJpZ2h0IiwKICAgICAgICAgICAgVmFyaWFudCA9ICJQcmltYXJ5IiwKICAgICAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBXaW5kVUk6Tm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJMb2FkZWQiLAogICAgICAgICAgICAgICAgICAgIENvbnRlbnQgPSAiRXZlcnl0aGluZyBpcyBsb2FkZWQgbm93ISIsCiAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSAzLAogICAgICAgICAgICAgICAgICAgIEljb24gPSAiY2hlY2siLAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgZW5kCiAgICAgICAgfQogICAgfQp9KQ=='))()